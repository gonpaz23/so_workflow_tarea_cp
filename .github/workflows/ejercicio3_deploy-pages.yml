name: Ejercicio 3 - Deploy a GitHub Pages

on:
  push:
    branches: [ main ]
  workflow_dispatch:  # Permite ejecuciÃ³n manual

# ğŸ“Œ PERMISOS ACTUALIZADOS para GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }} # OPCIONAL: para obtener la URL
    
    steps:
    - name: Checkout del cÃ³digo
      uses: actions/checkout@v4  # Puedes usar v3 o v4
    
    # â¬‡ï¸ ACCIÃ“N CRÃTICA ACTUALIZADA (Causa del error)
    - name: Subir artefacto del sitio
      uses: actions/upload-pages-artifact@v3  # âœ… Cambia de v2 a v3
      with:
        path: '.'  # Sube todo el directorio actual
    
    # â¬‡ï¸ ACCIÃ“N CRÃTICA ACTUALIZADA
    - name: Desplegar a GitHub Pages
      uses: actions/deploy-pages@v4  # âœ… Cambia de v2 a v4